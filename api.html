

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Python API &mdash; OpenClimateGIS 0.03a documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.03a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenClimateGIS 0.03a documentation" href="index.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">OpenClimateGIS 0.03a documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="python-api">
<span id="id1"></span><h1>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h1>
<p>Additional information on keyword arguments can be found below the initial documentation in the <a class="reference internal" href="#detailed-argument-information">Detailed Argument Information</a> section.</p>
<div class="section" id="the-ocgoperations-object">
<h2>The <tt class="xref py py-class docutils literal"><span class="pre">OcgOperations</span></tt> Object<a class="headerlink" href="#the-ocgoperations-object" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocgis.OcgOperations">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">OcgOperations</tt><big>(</big><em>dataset=None</em>, <em>spatial_operation='intersects'</em>, <em>geom=None</em>, <em>aggregate=False</em>, <em>calc=None</em>, <em>calc_grouping=None</em>, <em>calc_raw=False</em>, <em>abstraction='polygon'</em>, <em>snippet=False</em>, <em>backend='ocg'</em>, <em>request_url=None</em>, <em>prefix='ocgis'</em>, <em>output_format='numpy'</em>, <em>output_grouping=None</em>, <em>agg_selection=False</em>, <em>select_ugid=None</em>, <em>vector_wrap=True</em>, <em>allow_empty=False</em><big>)</big><a class="headerlink" href="#ocgis.OcgOperations" title="Permalink to this definition">¶</a></dt>
<dd><p>Entry point for OCGIS operations. Parameters may be modified before an
execution.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The object SHOULD NOT be reused following an execution as the software may add/modify attribute contents. Instantiate a new object following an execution.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The only required argument is <cite>dataset</cite>.</p>
</div>
<p>All keyword arguments are exposed as public attributes which may be 
arbitrarily set using standard syntax:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">OcgOperations</span><span class="p">(</span><span class="n">RequestDataset</span><span class="p">(</span><span class="s">&#39;/path/to/some/dataset&#39;</span><span class="p">,</span><span class="s">&#39;foo&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span><span class="o">.</span><span class="n">aggregate</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>The builtins <tt class="xref py py-func docutils literal"><span class="pre">__getattribute__()</span></tt> and <tt class="xref py py-func docutils literal"><span class="pre">__setattr__()</span></tt> are overloaded to perform 
validation and formatting upon assignment and to properly return parameter 
values from internal objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dataset</strong> (<tt class="xref py py-class docutils literal"><span class="pre">RequestDatasetCollection</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt>) &#8211; The target dataset(s) for the request. This is the only required parameter.</li>
<li><strong>spatial_operation</strong> (<em>str</em>) &#8211; The geometric operation to be performed.</li>
<li><strong>geom</strong> (<em>list of dictionaries</em>) &#8211; The selection geometry(s) used for the spatial subset. If <cite>None</cite>, selection defaults to entire spatial domain.</li>
<li><strong>aggregate</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, dataset geometries are aggregated to coincident selection geometries.</li>
<li><strong>calc</strong> (<em>list of dictionaries</em>) &#8211; Calculations to be performed on the dataset subset.</li>
<li><strong>calc_grouping</strong> (<em>list of strings</em>) &#8211; Temporal grouping to apply during calculation.</li>
<li><strong>calc_raw</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, perform calculations on the &#8220;raw&#8221; data regardless of <cite>aggregation</cite> flag.</li>
<li><strong>abstraction</strong> (<em>str</em>) &#8211; The geometric abstraction to use for the dataset geometries.</li>
<li><strong>snippet</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, return a data &#8220;snippet&#8221; composed of the first time point/group, first level (if applicable), and the entire spatial domain.</li>
<li><strong>backend</strong> (<em>str</em>) &#8211; The processing backend to use.</li>
<li><strong>prefix</strong> (<em>str</em>) &#8211; The output prefix to prepend to any output data.</li>
<li><strong>output_format</strong> (<em>str</em>) &#8211; The desired output format.</li>
<li><strong>agg_selection</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, the selection geometry will be aggregated prior to any spatial operations.</li>
<li><strong>select_ugid</strong> (<em>list of integers</em>) &#8211; The unique identifiers of specific geometries contained in canned geometry datasets. These unique identifiers will be selected and used for spatial operations.</li>
<li><strong>vector_wrap</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, keep any vector output on a -180 to 180 longitudinal domain.</li>
<li><strong>allow_empty</strong> (<em>bool</em>) &#8211; If <cite>True</cite>, do not raise an exception in the case of an empty geometric selection.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocgis.OcgOperations.execute">
<tt class="descname">execute</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.OcgOperations.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the request using the selected backend.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Path to an output file/folder or <tt class="xref py py-class docutils literal"><span class="pre">ocgis.OcgCollection</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocgis.OcgOperations.as_dict">
<tt class="descname">as_dict</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.OcgOperations.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dictionary</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocgis.OcgOperations.as_qs">
<tt class="descname">as_qs</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.OcgOperations.as_qs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a query string representation of the request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<div class="section" id="detailed-argument-information">
<h3>Detailed Argument Information<a class="headerlink" href="#detailed-argument-information" title="Permalink to this headline">¶</a></h3>
<p>Additional information on arguments are found in their respective sections.</p>
<div class="section" id="dataset">
<h4>dataset<a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h4>
<p>A <cite>dataset</cite> is the target file(s) where data is stored. A <cite>dataset</cite> may be on the local machine or network location accessible by the software. Unsecured OpenDAP datasets may also be accessed.</p>
<dl class="class">
<dt id="ocgis.RequestDataset">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">RequestDataset</tt><big>(</big><em>uri</em>, <em>variable</em>, <em>alias=None</em>, <em>time_range=None</em>, <em>level_range=None</em>, <em>s_proj=None</em>, <em>t_units=None</em>, <em>t_calendar=None</em><big>)</big><a class="headerlink" href="#ocgis.RequestDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>A <tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt> contains all the information necessary to find
and subset a variable (by time and/or level) contained in a local or 
OpenDAP-hosted CF dataset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>uri</strong> (<em>str</em>) &#8211; The absolute path (URLs included) to the dataset&#8217;s location.</li>
<li><strong>variable</strong> (<em>str</em>) &#8211; The target variable.</li>
<li><strong>alias</strong> (<em>str</em>) &#8211; An alternative name to identify the returned variable&#8217;s data. If <cite>None</cite>, this defaults to <cite>variable</cite>. If variables having the same name occur in a request, this value will be required.</li>
<li><strong>time_range</strong> ([<tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt>, <tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt>]) &#8211; Upper and lower bounds for time dimension subsetting. If <cite>None</cite>, return all time points.</li>
<li><strong>level_range</strong> (<em>[int, int]</em>) &#8211; Upper and lower bounds for level dimension subsetting. If <cite>None</cite>, return all levels.</li>
<li><strong>s_proj</strong> (<em>str</em>) &#8211; A <a class="reference external" href="http://trac.osgeo.org/proj/wiki/FAQ">PROJ4 string</a> describing the dataset&#8217;s spatial reference.</li>
<li><strong>t_units</strong> (<em>str</em>) &#8211; Overload the autodiscover <a class="reference external" href="http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4-module.html#num2date">time units</a>.</li>
<li><strong>t_calendar</strong> (<em>str</em>) &#8211; Overload the autodiscover <a class="reference external" href="http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4-module.html#num2date">time calendar</a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ocgis.RequestDatasetCollection">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">RequestDatasetCollection</tt><big>(</big><em>request_datasets=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#ocgis.RequestDatasetCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains business logic ensuring multi-<tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt> objects are
compatible.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request_datasets</strong> (sequence of <tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt> objects) &#8211; A sequence of <tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt> objects.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocgis.RequestDatasetCollection.update">
<tt class="descname">update</tt><big>(</big><em>request_dataset</em><big>)</big><a class="headerlink" href="#ocgis.RequestDatasetCollection.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt> to the collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request_dataset</strong> (<tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt>) &#8211; The <tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt> to add.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="spatial-operation">
<h4>spatial_operation<a class="headerlink" href="#spatial-operation" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>intersects</cite> (default)</td>
<td>Source geometries touching or overlapping selection geometries are returned.</td>
</tr>
<tr class="row-odd"><td><cite>clip</cite></td>
<td>A full geometric intersection is performed between source and selection geometries. New geometries may be created.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python API</a><ul>
<li><a class="reference internal" href="#the-ocgoperations-object">The <tt class="docutils literal"><span class="pre">OcgOperations</span></tt> Object</a><ul>
<li><a class="reference internal" href="#detailed-argument-information">Detailed Argument Information</a><ul>
<li><a class="reference internal" href="#dataset">dataset</a></li>
<li><a class="reference internal" href="#spatial-operation">spatial_operation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">OpenClimateGIS 0.03a documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ben Koziol, Tyler Erickson, K. Arthur Endsley.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>